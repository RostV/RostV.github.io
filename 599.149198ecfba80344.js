(()=>{"use strict";var b=(()=>{return(r=b||(b={})).generatePassword="generatePassword",r.progress="progress",r.generatePasswordComplete="generatePasswordComplete",b;var r})();function E(r,t,e,s,o,i,n){try{var c=r[i](n),a=c.value}catch(d){return void e(d)}c.done?t(a):Promise.resolve(a).then(s,o)}function g(r){return"function"==typeof r}let S=!1;const h={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else S&&console.log("RxJS: Back to a better error behavior. Thank you. <3");S=r},get useDeprecatedSynchronousErrorHandling(){return S}};function p(r){setTimeout(()=>{throw r},0)}const y={closed:!0,next(r){},error(r){if(h.useDeprecatedSynchronousErrorHandling)throw r;p(r)},complete(){}},R=Array.isArray||(r=>r&&"number"==typeof r.length),m=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,s)=>`${s+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class u{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:s,_unsubscribe:o,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(let n=0;n<e.length;++n)e[n].remove(this);if(g(o)){s&&(this._unsubscribe=void 0);try{o.call(this)}catch(n){t=n instanceof m?P(n.errors):[n]}}if(R(i)){let n=-1,c=i.length;for(;++n<c;){const a=i[n];if(null!==(r=a)&&"object"==typeof r)try{a.unsubscribe()}catch(d){t=t||[],d instanceof m?t=t.concat(P(d.errors)):t.push(d)}}}var r;if(t)throw new m(t)}add(t){let e=t;if(!t)return u.EMPTY;switch(typeof t){case"function":e=new u(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof u)){const i=e;e=new u,e._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:s}=e;if(null===s)e._parentOrParents=this;else if(s instanceof u){if(s===this)return e;e._parentOrParents=[s,this]}else{if(-1!==s.indexOf(this))return e;s.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[e]:o.push(e),e}remove(t){const e=this._subscriptions;if(e){const s=e.indexOf(t);-1!==s&&e.splice(s,1)}}}var r;function P(r){return r.reduce((t,e)=>t.concat(e instanceof m?e.errors:e),[])}u.EMPTY=((r=new u).closed=!0,r);const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class l extends u{constructor(t,e,s){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=y;break;case 1:if(!t){this.destination=y;break}if("object"==typeof t){t instanceof l?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new C(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new C(this,t,e,s)}}[w](){return this}static create(t,e,s){const o=new l(t,e,s);return o.syncErrorThrowable=!1,o}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class C extends l{constructor(t,e,s,o){super(),this._parentSubscriber=t;let i,n=this;g(e)?i=e:e&&(i=e.next,s=e.error,o=e.complete,e!==y&&(n=Object.create(e),g(n.unsubscribe)&&this.add(n.unsubscribe.bind(n)),n.unsubscribe=this.unsubscribe.bind(this))),this._context=n,this._next=i,this._error=s,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;h.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:s}=h;if(this._error)s&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)s?(e.syncErrorValue=t,e.syncErrorThrown=!0):p(t),this.unsubscribe();else{if(this.unsubscribe(),s)throw t;p(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);h.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(s){if(this.unsubscribe(),h.useDeprecatedSynchronousErrorHandling)throw s;p(s)}}__tryOrSetError(t,e,s){if(!h.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,s)}catch(o){return h.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(p(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const M="function"==typeof Symbol&&Symbol.observable||"@@observable";function H(r){return r}let x=(()=>{class r{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const s=new r;return s.source=this,s.operator=e,s}subscribe(e,s,o){const{operator:i}=this,n=function(r,t,e){if(r){if(r instanceof l)return r;if(r[w])return r[w]()}return r||t||e?new l(r,t,e):new l(y)}(e,s,o);if(n.add(i?i.call(n,this.source):this.source||h.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),h.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n}_trySubscribe(e){try{return this._subscribe(e)}catch(s){h.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=s),function(r){for(;r;){const{closed:t,destination:e,isStopped:s}=r;if(t||s)return!1;r=e&&e instanceof l?e:null}return!0}(e)?e.error(s):console.warn(s)}}forEach(e,s){return new(s=v(s))((o,i)=>{let n;n=this.subscribe(c=>{try{e(c)}catch(a){i(a),n&&n.unsubscribe()}},i,o)})}_subscribe(e){const{source:s}=this;return s&&s.subscribe(e)}[M](){return this}pipe(...e){return 0===e.length?this:function(r){return 0===r.length?H:1===r.length?r[0]:function(e){return r.reduce((s,o)=>o(s),e)}}(e)(this)}toPromise(e){return new(e=v(e))((s,o)=>{let i;this.subscribe(n=>i=n,n=>o(n),()=>s(i))})}}return r.create=t=>new r(t),r})();function v(r){if(r||(r=h.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const f=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class k extends u{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const s=e.indexOf(this.subscriber);-1!==s&&e.splice(s,1)}}class A extends l{constructor(t){super(t),this.destination=t}}let _=(()=>{class r extends x{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[w](){return new A(this)}lift(e){const s=new T(this,this);return s.operator=e,s}next(e){if(this.closed)throw new f;if(!this.isStopped){const{observers:s}=this,o=s.length,i=s.slice();for(let n=0;n<o;n++)i[n].next(e)}}error(e){if(this.closed)throw new f;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:s}=this,o=s.length,i=s.slice();for(let n=0;n<o;n++)i[n].error(e);this.observers.length=0}complete(){if(this.closed)throw new f;this.isStopped=!0;const{observers:e}=this,s=e.length,o=e.slice();for(let i=0;i<s;i++)o[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new f;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new f;return this.hasError?(e.error(this.thrownError),u.EMPTY):this.isStopped?(e.complete(),u.EMPTY):(this.observers.push(e),new k(this,e))}asObservable(){const e=new x;return e.source=this,e}}return r.create=(t,e)=>new T(t,e),r})();class T extends _{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):u.EMPTY}}class L{constructor(t){Object.defineProperty(this,"chunkReady",{enumerable:!0,configurable:!0,writable:!0,value:new _}),Object.defineProperty(this,"generationComplete",{enumerable:!0,configurable:!0,writable:!0,value:new _}),Object.defineProperty(this,"alphabetSymbols",{enumerable:!0,configurable:!0,writable:!0,value:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"]}),Object.defineProperty(this,"numberSymbols",{enumerable:!0,configurable:!0,writable:!0,value:[0,1,2,3,4,5,6,7,8,9]}),Object.defineProperty(this,"lowerChance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"upperChance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"numberChance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"differingSymbols",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"opts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.opts=t,this.initialCalcChances()}generateManyPassword(t=100){var e=this;return function(r){return function(){var t=this,e=arguments;return new Promise(function(s,o){var i=r.apply(t,e);function n(a){E(i,s,o,n,c,"next",a)}function c(a){E(i,s,o,n,c,"throw",a)}n(void 0)})}}(function*(){new Promise((o,i)=>{let n=[];for(let c=0;c<e.opts.count;c++)n.push(e.generatePassword(e.opts)),n.length===t&&(e.chunkReady.next(n),n=[]);n.length&&(e.chunkReady.next(n),n=[]),o("")}).then(o=>{e.generationComplete.next()})})()}generatePassword(t){const e=this.getRandomInt(0,100),s=[];for(let o=0;o<t.passwordLength;o++){if(o<=t.passwordLength-this.differingSymbols-1){if(t.useLowerCase&&!s.some(i=>this.alphabetSymbols.some(n=>n===i))){const i=this.getRandomInt(0,this.alphabetSymbols.length);s.push(this.alphabetSymbols[i]);continue}if(t.useUpperCase&&!s.some(i=>this.alphabetSymbols.some(n=>n.toUpperCase()===i))){const i=this.getRandomInt(0,this.alphabetSymbols.length);s.push(this.alphabetSymbols[i].toUpperCase());continue}if(t.useNumbers&&!s.some(i=>this.numberSymbols.some(n=>n===i))){const i=this.getRandomInt(0,this.numberSymbols.length);s.push(this.numberSymbols[i]);continue}}if(e<this.lowerChance){this.recalcChances(-12,6,6);const i=this.getRandomInt(0,this.alphabetSymbols.length);s.push(this.alphabetSymbols[i])}else if(e<this.upperChance+this.lowerChance){this.recalcChances(6,-12,6);const i=this.getRandomInt(0,this.alphabetSymbols.length);s.push(this.alphabetSymbols[i].toUpperCase())}else{this.recalcChances(6,6,-12);const i=this.getRandomInt(0,this.numberSymbols.length);s.push(this.numberSymbols[i])}}return s.join("")}recalcChances(t,e,s){1!==this.differingSymbols&&(0!==this.lowerChance&&(this.lowerChance+=t),0!==this.upperChance&&(this.upperChance+=e),0!==this.numberChance&&(this.numberChance+=s))}initialCalcChances(){this.opts.useLowerCase&&this.differingSymbols++,this.opts.useNumbers&&this.differingSymbols++,this.opts.useUpperCase&&this.differingSymbols++;const e=100/this.differingSymbols;this.opts.useLowerCase&&(this.lowerChance=e),this.opts.useNumbers&&(this.numberChance=e),this.opts.useUpperCase&&(this.upperChance=e)}getRandomInt(t=0,e=1){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}}addEventListener("message",r=>{const e=new L(r.data.data),s=[],o=e.chunkReady.subscribe(i=>{i.forEach(c=>{s.push(c)}),postMessage({type:b.progress,data:i.length})});e.generationComplete.subscribe(()=>{o.unsubscribe(),postMessage({type:b.generatePasswordComplete,data:s})}),e.generateManyPassword(1e3)})})();